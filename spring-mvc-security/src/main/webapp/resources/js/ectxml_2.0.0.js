/*! ectxml 2.0.0 2016-04-15 11:10:25 */

var requirejs,require,define;!function(ga){function ka(a,b,c,d){return d||""}function K(a){return"[object Function]"===Q.call(a)}function L(a){return"[object Array]"===Q.call(a)}function y(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function X(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));--c);}}function x(a,b){return la.call(a,b)}function e(a,b){return x(a,b)&&a[b]}function D(a,b){for(var c in a)if(x(a,c)&&b(a[c],c))break}function Y(a,b,c,d){return b&&D(b,function(b,e){(c||!x(a,e))&&(!d||"object"!=typeof b||!b||L(b)||K(b)||b instanceof RegExp?a[e]=b:(a[e]||(a[e]={}),Y(a[e],b,c,d)))}),a}function z(a,b){return function(){return b.apply(a,arguments)}}function ha(a){throw a}function ia(a){if(!a)return a;var b=ga;return y(a.split("."),function(a){b=b[a]}),b}function F(a,b,c,d){return b=Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a),b.requireType=a,b.requireModules=d,c&&(b.originalError=c),b}function ma(a){function b(a,b,c){var d,f,g,h,i,j,k,l;b=b&&b.split("/");var m=A.map,n=m&&m["*"];if(a){for(a=a.split("/"),f=a.length-1,A.nodeIdCompat&&U.test(a[f])&&(a[f]=a[f].replace(U,"")),"."===a[0].charAt(0)&&b&&(f=b.slice(0,b.length-1),a=f.concat(a)),f=a,g=0;g<f.length;g++)h=f[g],"."===h?(f.splice(g,1),--g):".."===h&&0!==g&&(1!==g||".."!==f[2])&&".."!==f[g-1]&&g>0&&(f.splice(g-1,2),g-=2);a=a.join("/")}if(c&&m&&(b||n)){f=a.split("/"),g=f.length;a:for(;g>0;--g){if(i=f.slice(0,g).join("/"),b)for(h=b.length;h>0;--h)if((c=e(m,b.slice(0,h).join("/")))&&(c=e(c,i))){d=c,j=g;break a}!k&&n&&e(n,i)&&(k=e(n,i),l=g)}!d&&k&&(d=k,j=l),d&&(f.splice(0,j,d),a=f.join("/"))}return(d=e(A.pkgs,a))?d:a}function c(a){E&&y(document.getElementsByTagName("script"),function(b){return b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===u.contextName?(b.parentNode.removeChild(b),!0):void 0})}function d(a){var b=e(A.paths,a);return b&&L(b)&&1<b.length?(b.shift(),u.require.undef(a),u.makeRequire(null,{skipMap:!0})([a]),!0):void 0}function f(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function h(a,c,d,g){var h,i,j=null,k=c?c.name:null,l=a,m=!0,n="";return a||(m=!1,a="_@r"+(O+=1)),a=f(a),j=a[0],a=a[1],j&&(j=b(j,k,g),i=e(I,j)),a&&(j?n=i&&i.normalize?i.normalize(a,function(a){return b(a,k,g)}):-1===a.indexOf("!")?b(a,k,g):a:(n=b(a,k,g),a=f(n),j=a[0],n=a[1],d=!0,h=u.nameToUrl(n))),d=!j||i||d?"":"_unnormalized"+(P+=1),{prefix:j,name:n,parentMap:c,unnormalized:!!d,url:h,originalName:l,isDefine:m,id:(j?j+"!"+n:n)+d}}function i(a){var b=a.id,c=e(B,b);return c||(c=B[b]=new u.Module(a)),c}function j(a,b,c){var d=a.id,f=e(B,d);!x(I,d)||f&&!f.defineEmitComplete?(f=i(a),f.error&&"error"===b?c(f.error):f.on(b,c)):"defined"===b&&c(I[d])}function k(a,b){var c=a.requireModules,d=!1;b?b(a):(y(c,function(b){(b=e(B,b))&&(b.error=a,b.events.error&&(d=!0,b.emit("error",a)))}),d||g.onError(a))}function l(){V.length&&(y(V,function(a){var b=a[0];"string"==typeof b&&(u.defQueueMap[b]=!0),H.push(a)}),V=[])}function m(a){delete B[a],delete C[a]}function n(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,y(a.depMaps,function(d,f){var g=d.id,h=e(B,g);!h||a.depMatched[f]||c[g]||(e(b,g)?(a.defineDep(f,I[g]),a.check()):n(h,b,c))}),c[d]=!0)}function o(){var a,b,e=(a=1e3*A.waitSeconds)&&u.startTime+a<(new Date).getTime(),f=[],g=[],h=!1,i=!0;if(!s){if(s=!0,D(C,function(a){var j=a.map,k=j.id;if(a.enabled&&(j.isDefine||g.push(a),!a.error))if(!a.inited&&e)d(k)?h=b=!0:(f.push(k),c(k));else if(!a.inited&&a.fetched&&j.isDefine&&(h=!0,!j.prefix))return i=!1}),e&&f.length)return a=F("timeout","Load timeout for modules: "+f,null,f),a.contextName=u.contextName,k(a);i&&y(g,function(a){n(a,{},{})}),e&&!b||!h||!E&&!ja||w||(w=setTimeout(function(){w=0,o()},50)),s=!1}}function p(a){x(I,a[0])||i(h(a[0],null,!0)).init(a[1],a[2])}function q(a){a=a.currentTarget||a.srcElement;var b=u.onScriptLoad;return a.detachEvent&&!ca?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1),b=u.onScriptError,a.detachEvent&&!ca||a.removeEventListener("error",b,!1),{node:a,id:a&&a.getAttribute("data-requiremodule")}}function r(){var a;for(l();H.length;){if(a=H.shift(),null===a[0])return k(F("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));p(a)}u.defQueueMap={}}var s,t,u,v,w,A={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},B={},C={},G={},H=[],I={},J={},M={},O=1,P=1;return v={require:function(a){return a.require?a.require:a.require=u.makeRequire(a.map)},exports:function(a){return a.usingExports=!0,a.map.isDefine?a.exports?I[a.map.id]=a.exports:a.exports=I[a.map.id]={}:void 0},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return e(A.config,a.map.id)||{}},exports:a.exports||(a.exports={})}}},t=function(a){this.events=e(G,a.id)||{},this.map=a,this.shim=e(A.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},t.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=z(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,--this.depCount,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,u.startTime=(new Date).getTime();var a=this.map;if(!this.shim)return a.prefix?this.callPlugin():this.load();u.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],z(this,function(){return a.prefix?this.callPlugin():this.load()}))}},load:function(){var a=this.map.url;J[a]||(J[a]=!0,u.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id;b=this.depExports;var d=this.exports,e=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(K(e)){if(this.events.error&&this.map.isDefine||g.onError!==ha)try{d=u.execCb(c,e,b,d)}catch(f){a=f}else d=u.execCb(c,e,b,d);if(this.map.isDefine&&void 0===d&&((b=this.module)?d=b.exports:this.usingExports&&(d=this.exports)),a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",k(this.error=a)}else d=e;if(this.exports=d,this.map.isDefine&&!this.ignore&&(I[c]=d,g.onResourceLoad)){var h=[];y(this.depMaps,function(a){h.push(a.normalizedMap||a)}),g.onResourceLoad(u,this.map,h)}m(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else x(u.defQueueMap,c)||this.fetch()}},callPlugin:function(){var a=this.map,c=a.id,d=h(a.prefix);this.depMaps.push(d),j(d,"defined",z(this,function(d){var f,l,n=e(M,this.map.id),o=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,q=u.makeRequire(a.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(d.normalize&&(o=d.normalize(o,function(a){return b(a,p,!0)})||""),l=h(a.prefix+"!"+o,this.map.parentMap),j(l,"defined",z(this,function(a){this.map.normalizedMap=l,this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),(d=e(B,l.id))&&(this.depMaps.push(l),this.events.error&&d.on("error",z(this,function(a){this.emit("error",a)})),d.enable())):n?(this.map.url=u.nameToUrl(n),this.load()):(f=z(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),f.error=z(this,function(a){this.inited=!0,this.error=a,a.requireModules=[c],D(B,function(a){0===a.map.id.indexOf(c+"_unnormalized")&&m(a.map.id)}),k(a)}),f.fromText=z(this,function(b,d){var e=a.name,j=h(e),l=S;d&&(b=d),l&&(S=!1),i(j),x(A.config,c)&&(A.config[e]=A.config[c]);try{g.exec(b)}catch(m){return k(F("fromtexteval","fromText eval for "+c+" failed: "+m,m,[c]))}l&&(S=!0),this.depMaps.push(j),u.completeLoad(e),q([e],f)}),d.load(a.name,q,f,A))})),u.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){C[this.map.id]=this,this.enabling=this.enabled=!0,y(this.depMaps,z(this,function(a,b){var c,d;if("string"==typeof a){if(a=h(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,c=e(v,a.id))return void(this.depExports[b]=c(this));this.depCount+=1,j(a,"defined",z(this,function(a){this.undefed||(this.defineDep(b,a),this.check())})),this.errback?j(a,"error",z(this,this.errback)):this.events.error&&j(a,"error",z(this,function(a){this.emit("error",a)}))}c=a.id,d=B[c],x(v,c)||!d||d.enabled||u.enable(a,this)})),D(this.pluginMaps,z(this,function(a){var b=e(B,a.id);b&&!b.enabled&&u.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){y(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},u={config:A,contextName:a,registry:B,defined:I,urlFetched:J,defQueue:H,defQueueMap:{},Module:t,makeModuleMap:h,nextTick:g.nextTick,onError:k,configure:function(a){if(a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/"),"string"==typeof a.urlArgs){var b=a.urlArgs;a.urlArgs=function(a,c){return(-1===c.indexOf("?")?"?":"&")+b}}var c=A.shim,d={paths:!0,bundles:!0,config:!0,map:!0};D(a,function(a,b){d[b]?(A[b]||(A[b]={}),Y(A[b],a,!0,!0)):A[b]=a}),a.bundles&&D(a.bundles,function(a,b){y(a,function(a){a!==b&&(M[a]=b)})}),a.shim&&(D(a.shim,function(a,b){L(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=u.makeShimExports(a)),c[b]=a}),A.shim=c),a.packages&&y(a.packages,function(a){var b;a="string"==typeof a?{name:a}:a,b=a.name,a.location&&(A.paths[b]=a.location),A.pkgs[b]=a.name+"/"+(a.main||"main").replace(na,"").replace(U,"")}),D(B,function(a,b){a.inited||a.map.unnormalized||(a.map=h(b,null,!0))}),(a.deps||a.callback)&&u.require(a.deps||[],a.callback)},makeShimExports:function(a){return function(){var b;return a.init&&(b=a.init.apply(ga,arguments)),b||a.exports&&ia(a.exports)}},makeRequire:function(d,f){function j(b,c,e){var l,m;return f.enableBuildCallback&&c&&K(c)&&(c.__requireJsBuild=!0),"string"==typeof b?K(c)?k(F("requireargs","Invalid require call"),e):d&&x(v,b)?v[b](B[d.id]):g.get?g.get(u,b,d,j):(l=h(b,d,!1,!0),l=l.id,x(I,l)?I[l]:k(F("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+a+(d?"":". Use require([])")))):(r(),u.nextTick(function(){r(),m=i(h(null,d)),m.skipMap=f.skipMap,m.init(b,c,e,{enabled:!0}),o()}),j)}return f=f||{},Y(j,{isBrowser:E,toUrl:function(a){var c,e=a.lastIndexOf("."),f=a.split("/")[0];return-1!==e&&("."!==f&&".."!==f||e>1)&&(c=a.substring(e,a.length),a=a.substring(0,e)),u.nameToUrl(b(a,d&&d.id,!0),c,!0)},defined:function(a){return x(I,h(a,d,!1,!0).id)},specified:function(a){return a=h(a,d,!1,!0).id,x(I,a)||x(B,a)}}),d||(j.undef=function(a){l();var b=h(a,d,!0),f=e(B,a);f.undefed=!0,c(a),delete I[a],delete J[b.url],delete G[a],X(H,function(b,c){b[0]===a&&H.splice(c,1)}),delete u.defQueueMap[a],f&&(f.events.defined&&(G[a]=f.events),m(a))}),j},enable:function(a){e(B,a.id)&&i(a).enable()},completeLoad:function(a){var b,c,f=e(A.shim,a)||{},g=f.exports;for(l();H.length;){if(c=H.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);p(c)}if(u.defQueueMap={},c=e(B,a),!b&&!x(I,a)&&c&&!c.inited){if(!(!A.enforceDefine||g&&ia(g)))return d(a)?void 0:k(F("nodefine","No define call for "+a,null,[a]));p([a,f.deps||[],f.exportsFn])}o()},nameToUrl:function(a,b,c){var d,f,h,i;if((d=e(A.pkgs,a))&&(a=d),d=e(M,a))return u.nameToUrl(d,b,c);if(g.jsExtRegExp.test(a))d=a+(b||"");else{for(d=A.paths,f=a.split("/"),h=f.length;h>0;--h)if(i=f.slice(0,h).join("/"),i=e(d,i)){L(i)&&(i=i[0]),f.splice(0,h,i);break}d=f.join("/"),d+=b||(/^data\:|^blob\:|\?/.test(d)||c?"":".js"),d=("/"===d.charAt(0)||d.match(/^[\w\+\.\-]+:/)?"":A.baseUrl)+d}return A.urlArgs&&!/^blob\:/.test(d)?d+A.urlArgs(a,d):d},load:function(a,b){g.load(u,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){("load"===a.type||oa.test((a.currentTarget||a.srcElement).readyState))&&(N=null,a=q(a),u.completeLoad(a.id))},onScriptError:function(a){var b=q(a);if(!d(b.id)){var c=[];return D(B,function(a,d){0!==d.indexOf("_@r")&&y(a.depMaps,function(a){return a.id===b.id?(c.push(d),!0):void 0})}),k(F("scripterror",'Script error for "'+b.id+(c.length?'", needed by: '+c.join(", "):'"'),a,[b.id]))}}},u.require=u.makeRequire(),u}function pa(){return N&&"interactive"===N.readyState?N:(X(document.getElementsByTagName("script"),function(a){return"interactive"===a.readyState?N=a:void 0}),N)}var g,B,C,H,O,I,N,P,u,T,qa=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ra=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,U=/\.js$/,na=/^\.\//;B=Object.prototype;var Q=B.toString,la=B.hasOwnProperty,E=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),ja=!E&&"undefined"!=typeof importScripts,oa=E&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,ca="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),J={},w={},V=[],S=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(K(requirejs))return;w=requirejs,requirejs=void 0}"undefined"==typeof require||K(require)||(w=require,require=void 0),g=requirejs=function(a,b,c,d){var f,h="_";return L(a)||"string"==typeof a||(f=a,L(b)?(a=b,b=c,c=d):a=[]),f&&f.context&&(h=f.context),(d=e(J,h))||(d=J[h]=g.s.newContext(h)),f&&d.configure(f),d.require(a,b,c)},g.config=function(a){return g(a)},g.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()},require||(require=g),g.version="2.2.0",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=E,B=g.s={contexts:J,newContext:ma},g({}),y(["toUrl","undef","defined","specified"],function(a){g[a]=function(){var b=J._;return b.require[a].apply(b,arguments)}}),E&&(C=B.head=document.getElementsByTagName("head")[0],H=document.getElementsByTagName("base")[0])&&(C=B.head=H.parentNode),g.onError=ha,g.createNode=function(a,b){return b=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),b.type=a.scriptType||"text/javascript",b.charset="utf-8",b.async=!0,b},g.load=function(a,b,c){var d,e=a&&a.config||{};if(E)return d=g.createNode(e,b,c),d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),!d.attachEvent||d.attachEvent.toString&&0>d.attachEvent.toString().indexOf("[native code")||ca?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)):(S=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=c,e.onNodeCreated&&e.onNodeCreated(d,e,b,c),P=d,H?C.insertBefore(d,H):C.appendChild(d),P=null,d;if(ja)try{setTimeout(function(){},0),importScripts(c),a.completeLoad(b)}catch(f){a.onError(F("importscripts","importScripts failed for "+b+" at "+c,f,[b]))}},E&&!w.skipDataMain&&X(document.getElementsByTagName("script"),function(a){return C||(C=a.parentNode),(O=a.getAttribute("data-main"))?(u=O,w.baseUrl||-1!==u.indexOf("!")||(I=u.split("/"),u=I.pop(),T=I.length?I.join("/")+"/":"./",w.baseUrl=T),u=u.replace(U,""),g.jsExtRegExp.test(u)&&(u=O),w.deps=w.deps?w.deps.concat(u):[u],!0):void 0}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),L(b)||(c=b,b=null),!b&&K(c)&&(b=[],c.length&&(c.toString().replace(qa,ka).replace(ra,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),S&&(d=P||pa())&&(a||(a=d.getAttribute("data-requiremodule")),e=J[d.getAttribute("data-requirecontext")]),e?(e.defQueue.push([a,b,c]),e.defQueueMap[a]=!0):V.push([a,b,c])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(w)}}(this),define("requireLib",function(){}),this.org=this.org||{},org.cometd={},org.cometd.JSON={},org.cometd.JSON.toJSON=org.cometd.JSON.fromJSON=function(){throw"Abstract"},org.cometd.Utils={},org.cometd.Utils.isString=function(a){return void 0===a||null===a?!1:"string"==typeof a||a instanceof String},org.cometd.Utils.isArray=function(a){return void 0===a||null===a?!1:a instanceof Array},org.cometd.Utils.inArray=function(a,b){for(var c=0;c<b.length;++c)if(a===b[c])return c;return-1},org.cometd.Utils.setTimeout=function(a,b,c){return window.setTimeout(function(){try{a._debug("Invoking timed function",b),b()}catch(c){a._debug("Exception invoking timed function",b,c)}},c)},org.cometd.Utils.clearTimeout=function(a){window.clearTimeout(a)},org.cometd.TransportRegistry=function(){var a=[],b={};this.getTransportTypes=function(){return a.slice(0)},this.findTransportTypes=function(c,d,e){for(var f=[],g=0;g<a.length;++g){var h=a[g];b[h].accept(c,d,e)===!0&&f.push(h)}return f},this.negotiateTransport=function(c,d,e,f){for(var g=0;g<a.length;++g)for(var h=a[g],i=0;i<c.length;++i)if(h===c[i]){var j=b[h];if(j.accept(d,e,f)===!0)return j}return null},this.add=function(c,d,e){for(var f=!1,g=0;g<a.length;++g)if(a[g]===c){f=!0;break}return f||("number"!=typeof e?a.push(c):a.splice(e,0,c),b[c]=d),!f},this.find=function(c){for(var d=0;d<a.length;++d)if(a[d]===c)return b[c];return null},this.remove=function(c){for(var d=0;d<a.length;++d)if(a[d]===c){a.splice(d,1);var e=b[c];return delete b[c],e}return null},this.clear=function(){a=[],b={}},this.reset=function(){for(var c=0;c<a.length;++c)b[a[c]].reset()}},org.cometd.Transport=function(){var a,b;this.registered=function(c,d){a=c,b=d},this.unregistered=function(){a=null,b=null},this._debug=function(){b._debug.apply(b,arguments)},this._mixin=function(){return b._mixin.apply(b,arguments)},this.getConfiguration=function(){return b.getConfiguration()},this.getAdvice=function(){return b.getAdvice()},this.setTimeout=function(a,c){return org.cometd.Utils.setTimeout(b,a,c)},this.clearTimeout=function(a){org.cometd.Utils.clearTimeout(a)},this.convertToMessages=function(a){if(org.cometd.Utils.isString(a))try{return org.cometd.JSON.fromJSON(a)}catch(b){throw this._debug("Could not convert to JSON the following string",'"'+a+'"'),b}if(org.cometd.Utils.isArray(a))return a;if(void 0===a||null===a)return[];if(a instanceof Object)return[a];throw"Conversion Error "+a+", typeof "+typeof a},this.accept=function(){throw"Abstract"},this.getType=function(){return a},this.send=function(){throw"Abstract"},this.reset=function(){this._debug("Transport",a,"reset")},this.abort=function(){this._debug("Transport",a,"aborted")},this.toString=function(){return this.getType()}},org.cometd.Transport.derive=function(a){function b(){}return b.prototype=a,new b},org.cometd.RequestTransport=function(){function a(a){for(;l.length>0;){var b=l[0],c=b[0],d=b[1];if(c.url!==a.url||c.sync!==a.sync)break;l.shift(),a.messages=a.messages.concat(c.messages),this._debug("Coalesced",c.messages.length,"messages from request",d.id)}}function b(a,b){if(this.transportSend(a,b),b.expired=!1,!a.sync){var c=this.getConfiguration().maxNetworkDelay,d=c;b.metaConnect===!0&&(d+=this.getAdvice().timeout),this._debug("Transport",this.getType(),"waiting at most",d,"ms for the response, maxNetworkDelay",c);var e=this;b.timeout=this.setTimeout(function(){b.expired=!0;var c="Request "+b.id+" of transport "+e.getType()+" exceeded "+d+" ms max network delay",f={reason:c},g=b.xhr;f.httpCode=e.xhrStatus(g),e.abortXHR(g),e._debug(c),e.complete(b,!1,b.metaConnect),a.onFailure(g,a.messages,f)},d)}}function c(a){var c=++i,d={id:c,metaConnect:!1,envelope:a};k.length<this.getConfiguration().maxConnections-1?(k.push(d),b.call(this,a,d)):(this._debug("Transport",this.getType(),"queueing request",c,"envelope",a),l.push([a,d]))}function d(a){var b=a.id;if(this._debug("Transport",this.getType(),"metaConnect complete, request",b),null!==j&&j.id!==b)throw"Longpoll request mismatch, completing request "+b;j=null}function e(b,d){var e=org.cometd.Utils.inArray(b,k);if(e>=0&&k.splice(e,1),l.length>0){var f=l.shift(),g=f[0],h=f[1];if(this._debug("Transport dequeued request",h.id),d)this.getConfiguration().autoBatch&&a.call(this,g),c.call(this,g),this._debug("Transport completed request",b.id,g);else{var i=this;this.setTimeout(function(){i.complete(h,!1,h.metaConnect);var a={reason:"Previous request failed"},b=h.xhr;a.httpCode=i.xhrStatus(b),g.onFailure(b,g.messages,a)},0)}}}function f(a){if(null!==j)throw"Concurrent metaConnect requests not allowed, request id="+j.id+" not yet completed";var c=++i;this._debug("Transport",this.getType(),"metaConnect send, request",c,"envelope",a);var d={id:c,metaConnect:!0,envelope:a};b.call(this,a,d),j=d}var g=new org.cometd.Transport,h=org.cometd.Transport.derive(g),i=0,j=null,k=[],l=[];return h.complete=function(a,b,c){c?d.call(this,a):e.call(this,a,b)},h.transportSend=function(){throw"Abstract"},h.transportSuccess=function(a,b,c){b.expired||(this.clearTimeout(b.timeout),this.complete(b,!0,b.metaConnect),c&&c.length>0?a.onSuccess(c):a.onFailure(b.xhr,a.messages,{httpCode:204}))},h.transportFailure=function(a,b,c){b.expired||(this.clearTimeout(b.timeout),this.complete(b,!1,b.metaConnect),a.onFailure(b.xhr,a.messages,c))},h.send=function(a,b){b?f.call(this,a):c.call(this,a)},h.abort=function(){g.abort();for(var a=0;a<k.length;++a){var b=k[a];b&&(this._debug("Aborting request",b),this.abortXHR(b.xhr)||this.transportFailure(b.envelope,b,{reason:"abort"}))}j&&(this._debug("Aborting metaConnect request",j),this.abortXHR(j.xhr)||this.transportFailure(j.envelope,j,{reason:"abort"})),this.reset()},h.reset=function(){g.reset(),j=null,k=[],l=[]},h.abortXHR=function(a){if(a)try{var b=a.readyState;return a.abort(),b!==XMLHttpRequest.UNSENT}catch(c){this._debug(c)}return!1},h.xhrStatus=function(a){if(a)try{return a.status}catch(b){this._debug(b)}return-1},h},org.cometd.LongPollingTransport=function(){var a=new org.cometd.RequestTransport,b=org.cometd.Transport.derive(a),c=!0;return b.accept=function(a,b){return c||!b},b.xhrSend=function(){throw"Abstract"},b.transportSend=function(a,b){this._debug("Transport",this.getType(),"sending request",b.id,"envelope",a);var d=this;try{var e=!0;b.xhr=this.xhrSend({transport:this,url:a.url,sync:a.sync,headers:this.getConfiguration().requestHeaders,body:org.cometd.JSON.toJSON(a.messages),onSuccess:function(e){d._debug("Transport",d.getType(),"received response",e);var f=!1;try{var g=d.convertToMessages(e);0===g.length?(c=!1,d.transportFailure(a,b,{httpCode:204})):(f=!0,d.transportSuccess(a,b,g))}catch(h){if(d._debug(h),!f){c=!1;var i={exception:h};i.httpCode=d.xhrStatus(b.xhr),d.transportFailure(a,b,i)}}},onError:function(f,g){d._debug("Transport",d.getType(),"received error",f,g),c=!1;var h={reason:f,exception:g};h.httpCode=d.xhrStatus(b.xhr),e?d.setTimeout(function(){d.transportFailure(a,b,h)},0):d.transportFailure(a,b,h)}}),e=!1}catch(f){c=!1,this.setTimeout(function(){d.transportFailure(a,b,{exception:f})},0)}},b.reset=function(){a.reset(),c=!0},b},org.cometd.CallbackPollingTransport=function(){function a(a,b,c){var d=this;return function(){d.transportFailure(a,b,"error",c)}}var b=new org.cometd.RequestTransport,c=org.cometd.Transport.derive(b);return c.accept=function(){return!0},c.jsonpSend=function(){throw"Abstract"},c.transportSend=function(b,c){for(var d=this,e=0,f=b.messages.length,g=[];f>0;){var h=org.cometd.JSON.toJSON(b.messages.slice(e,e+f)),i=b.url.length+encodeURI(h).length,j=this.getConfiguration().maxURILength;if(i>j){if(1===f){var k="Bayeux message too big ("+i+" bytes, max is "+j+") for transport "+this.getType();return void this.setTimeout(a.call(this,b,c,k),0)}--f}else g.push(f),e+=f,f=b.messages.length-e}var l=b;if(g.length>1){var m=0,n=g[0];this._debug("Transport",this.getType(),"split",b.messages.length,"messages into",g.join(" + ")),l=this._mixin(!1,{},b),l.messages=b.messages.slice(m,n),l.onSuccess=b.onSuccess,l.onFailure=b.onFailure;for(var o=1;o<g.length;++o){var p=this._mixin(!1,{},b);m=n,n+=g[o],p.messages=b.messages.slice(m,n),p.onSuccess=b.onSuccess,p.onFailure=b.onFailure,this.send(p,c.metaConnect)}}this._debug("Transport",this.getType(),"sending request",c.id,"envelope",l);try{var q=!0;this.jsonpSend({transport:this,url:l.url,sync:l.sync,headers:this.getConfiguration().requestHeaders,body:org.cometd.JSON.toJSON(l.messages),onSuccess:function(a){var b=!1;try{var e=d.convertToMessages(a);0===e.length?d.transportFailure(l,c,{httpCode:204}):(b=!0,d.transportSuccess(l,c,e))}catch(f){d._debug(f),b||d.transportFailure(l,c,{exception:f})}},onError:function(a,b){var e={reason:a,exception:b};q?d.setTimeout(function(){d.transportFailure(l,c,e)},0):d.transportFailure(l,c,e)}}),q=!1}catch(r){this.setTimeout(function(){d.transportFailure(l,c,{exception:r})},0)}},c},org.cometd.WebSocketTransport=function(){function a(a,b){a&&(this.webSocketClose(a,b.code,b.reason),this.onClose(a,b))}function b(a){return a===n||a===m}function c(a,b,c){for(var d=[],e=0;e<b.messages.length;++e){var f=b.messages[e];f.id&&d.push(f.id)}a.envelopes[d.join(",")]=[b,c],this._debug("Transport",this.getType(),"stored envelope, envelopes",a.envelopes)}function d(c){if(!n){var d=g.getURL().replace(/^http/,"ws");this._debug("Transport",this.getType(),"connecting to URL",d);try{var e=g.getConfiguration().protocol;c.webSocket=e?new org.cometd.WebSocket(d,e):new org.cometd.WebSocket(d),n=c}catch(f){throw j=!1,this._debug("Exception while creating WebSocket object",f),f}l=g.getConfiguration().stickyReconnect!==!1;var h=this,i=g.getConfiguration().connectTimeout;i>0&&(c.connectTimer=this.setTimeout(function(){g._debug("Transport",h.getType(),"timed out while connecting to URL",d,":",i,"ms"),a.call(h,c,{code:1e3,reason:"Connect Timeout"})},i));var o=function(){g._debug("WebSocket onopen",c),c.connectTimer&&h.clearTimeout(c.connectTimer),b(c)?(n=null,m=c,k=!0,h.onOpen(c)):(g._warn("Closing extra WebSocket connection",this,"active connection",m),a.call(h,c,{code:1e3,reason:"Extra Connection"}))},p=function(a){a=a||{code:1e3},g._debug("WebSocket onclose",c,a,"connecting",n,"current",m),c.connectTimer&&h.clearTimeout(c.connectTimer),h.onClose(c,a)},q=function(a){g._debug("WebSocket onmessage",a,c),h.onMessage(c,a)};c.webSocket.onopen=o,c.webSocket.onclose=p,c.webSocket.onerror=function(){p({code:1e3,reason:"Error"})},c.webSocket.onmessage=q,this._debug("Transport",this.getType(),"configured callbacks on",c)}}function e(b,c,d){var e=org.cometd.JSON.toJSON(c.messages);b.webSocket.send(e),this._debug("Transport",this.getType(),"sent",c,"metaConnect =",d);var f=this.getConfiguration().maxNetworkDelay,h=f;d&&(h+=this.getAdvice().timeout,o=!0);for(var i=this,j=[],k=0;k<c.messages.length;++k)!function(){var d=c.messages[k];d.id&&(j.push(d.id),b.timeouts[d.id]=this.setTimeout(function(){g._debug("Transport",i.getType(),"timing out message",d.id,"after",h,"on",b),a.call(i,b,{code:1e3,reason:"Message Timeout"})},h))}();this._debug("Transport",this.getType(),"waiting at most",h,"ms for messages",j,"maxNetworkDelay",f,", timeouts:",b.timeouts)}function f(b,f,g){try{null===b?(b=n||{envelopes:{},timeouts:{}},c.call(this,b,f,g),d.call(this,b)):(c.call(this,b,f,g),e.call(this,b,f,g))}catch(h){var i=this;this.setTimeout(function(){a.call(i,b,{code:1e3,reason:"Exception",exception:h})},0)}}var g,h=new org.cometd.Transport,i=org.cometd.Transport.derive(h),j=!0,k=!1,l=!0,m=null,n=null,o=!1,p=null;return i.reset=function(){h.reset(),j=!0,k=!1,l=!0,m=null,n=null,o=!1},i._notifySuccess=function(a,b){a.call(this,b)},i._notifyFailure=function(a,b,c,d){a.call(this,b,c,d)},i.onOpen=function(a){var b=a.envelopes;this._debug("Transport",this.getType(),"opened",a,"pending messages",b);for(var c in b)if(b.hasOwnProperty(c)){var d=b[c],f=d[0],g=d[1];p=f.onSuccess,e.call(this,a,f,g)}},i.onMessage=function(a,b){this._debug("Transport",this.getType(),"received websocket message",b,a);for(var c=!1,d=this.convertToMessages(b.data),e=[],f=0;f<d.length;++f){var g=d[f];if((/^\/meta\//.test(g.channel)||void 0===g.data)&&g.id){e.push(g.id);var h=a.timeouts[g.id];h&&(this.clearTimeout(h),delete a.timeouts[g.id],this._debug("Transport",this.getType(),"removed timeout for message",g.id,", timeouts",a.timeouts))}"/meta/connect"===g.channel&&(o=!1),"/meta/disconnect"!==g.channel||o||(c=!0)}for(var i=!1,j=a.envelopes,k=0;k<e.length;++k){var l=e[k];for(var m in j)if(j.hasOwnProperty(m)){var n=m.split(","),q=org.cometd.Utils.inArray(l,n);if(q>=0){i=!0,n.splice(q,1);var r=j[m][0],s=j[m][1];delete j[m],n.length>0&&(j[n.join(",")]=[r,s]);break}}}i&&this._debug("Transport",this.getType(),"removed envelope, envelopes",j),this._notifySuccess(p,d),c&&this.webSocketClose(a,1e3,"Disconnect")},i.onClose=function(a,c){this._debug("Transport",this.getType(),"closed",a,c),b(a)&&(j=l&&k,n=null,m=null);var d=a.timeouts;a.timeouts={};for(var e in d)d.hasOwnProperty(e)&&this.clearTimeout(d[e]);var f=a.envelopes;a.envelopes={};for(var g in f)if(f.hasOwnProperty(g)){var h=f[g][0],i=f[g][1];i&&(o=!1);var p={websocketCode:c.code,reason:c.reason};c.exception&&(p.exception=c.exception),this._notifyFailure(h.onFailure,a,h.messages,p)}},i.registered=function(a,b){h.registered(a,b),g=b},i.accept=function(){return this._debug("Transport",this.getType(),"accept, supported:",j),j&&!!org.cometd.WebSocket&&g.websocketEnabled!==!1},i.send=function(a,b){this._debug("Transport",this.getType(),"sending",a,"metaConnect =",b),f.call(this,m,a,b)},i.webSocketClose=function(a,b,c){try{a.webSocket&&a.webSocket.close(b,c)}catch(d){this._debug(d)}},i.abort=function(){h.abort(),a.call(this,m,{code:1e3,reason:"Abort"}),this.reset()},i},org.cometd.CometD=function(a){function b(a,b){try{return a[b]}catch(c){return void 0}}function c(a){return org.cometd.Utils.isString(a)}function d(a){return void 0===a||null===a?!1:"function"==typeof a}function e(a,b){for(var c="";--b>0&&!(a>=Math.pow(10,b));)c+="0";return c+=a}function f(a,b){if(window.console){var c=window.console[a];if(d(c)){var f=new Date;[].splice.call(b,0,0,e(f.getHours(),2)+":"+e(f.getMinutes(),2)+":"+e(f.getSeconds(),2)+"."+e(f.getMilliseconds(),3)),c.apply(window.console,b)}}}function g(a){ia._debug("Configuring cometd object with",a),c(a)&&(a={url:a}),a||(a={}),Ba=ia._mixin(!1,Ba,a);var b=ia.getURL();if(!b)throw"Missing required configuration parameter 'url' specifying the Bayeux server URL";var d=/(^https?:\/\/)?(((\[[^\]]+\])|([^:\/\?#]+))(:(\d+))?)?([^\?#]*)(.*)?/.exec(b),e=d[2],f=d[8],g=d[9];if(ka=ia._isCrossDomain(e),Ba.appendMessageTypeToURL)if(void 0!==g&&g.length>0)ia._info("Appending message type to URI "+f+g+" is not supported, disabling 'appendMessageTypeToURL' configuration"),Ba.appendMessageTypeToURL=!1;else{var h=f.split("/"),i=h.length-1;f.match(/\/$/)&&(i-=1),h[i].indexOf(".")>=0&&(ia._info("Appending message type to URI "+f+" is not supported, disabling 'appendMessageTypeToURL' configuration"),Ba.appendMessageTypeToURL=!1)}}function h(a){if(a){var b=sa[a.channel];b&&b[a.id]&&(delete b[a.id],ia._debug("Removed",a.listener?"listener":"subscription",a))}}function i(a){a&&!a.listener&&h(a)}function j(){for(var a in sa)if(sa.hasOwnProperty(a)){var b=sa[a];if(b)for(var c=0;c<b.length;++c)i(b[c])}}function k(a){ma!==a&&(ia._debug("Status",ma,"->",a),ma=a)}function l(){return"disconnecting"===ma||"disconnected"===ma}function m(){var a=++na;return""+a}function n(a,b,c,e,f){try{return b.call(a,e)}catch(g){var h=ia.onExtensionException;if(d(h)){ia._debug("Invoking extension exception handler",c,g);try{h.call(ia,g,c,f,e)}catch(i){ia._info("Exception during execution of extension exception handler",c,i)}}else ia._info("Exception during execution of extension",c,g);return e}}function o(a){for(var b=0;b<va.length&&(void 0!==a&&null!==a);++b){var c=Ba.reverseIncomingExtensions?va.length-1-b:b,e=va[c],f=e.extension.incoming;if(d(f)){var g=n(e.extension,f,e.name,a,!1);a=void 0===g?a:g}}return a}function p(a){for(var b=0;b<va.length&&(void 0!==a&&null!==a);++b){var c=va[b],e=c.extension.outgoing;if(d(e)){var f=n(c.extension,e,c.name,a,!0);a=void 0===f?a:f}}return a}function q(a,b){var c=sa[a];if(c&&c.length>0)for(var e=0;e<c.length;++e){var f=c[e];if(f)try{f.callback.call(f.scope,b)}catch(g){var h=ia.onListenerException;if(d(h)){ia._debug("Invoking listener exception handler",f,g);try{h.call(ia,g,f,f.listener,b);

}catch(i){ia._info("Exception during execution of listener exception handler",f,i)}}else ia._info("Exception during execution of listener",f,b,g)}}}function r(a,b){q(a,b);for(var c=a.split("/"),d=c.length-1,e=d;e>0;--e){var f=c.slice(0,e).join("/")+"/*";e===d&&q(f,b),f+="*",q(f,b)}}function s(){null!==ua&&org.cometd.Utils.clearTimeout(ua),ua=null}function t(a){s();var b=wa.interval+ta;ia._debug("Function scheduled in",b,"ms, interval =",wa.interval,"backoff =",ta,a),ua=org.cometd.Utils.setTimeout(ia,a,b)}function u(a,b,c,d){for(var e=0;e<b.length;++e){var f=b[e],g=f.id;oa&&(f.clientId=oa),f=p(f),void 0!==f&&null!==f?(f.id=g,b[e]=f):(delete xa[g],b.splice(e--,1))}if(0!==b.length){var h=ia.getURL();Ba.appendMessageTypeToURL&&(h.match(/\/$/)||(h+="/"),d&&(h+=d));var i={url:h,sync:a,messages:b,onSuccess:function(a){try{Ca.call(ia,a)}catch(b){ia._info("Exception during handling of messages",b)}},onFailure:function(a,b,c){try{var d=ia.getTransport();c.connectionType=d?d.getType():"unknown",Da.call(ia,a,b,c)}catch(e){ia._info("Exception during handling of failure",e)}}};ia._debug("Send",i),fa.send(i,c)}}function v(a){pa>0||ra===!0?qa.push(a):u(!1,[a],!1)}function w(){ta=0}function x(){ta<Ba.maxBackoff&&(ta+=Ba.backoffIncrement)}function y(){++pa,ia._debug("Starting batch, depth",pa)}function z(){var a=qa;qa=[],a.length>0&&u(!1,a,!1)}function A(){if(--pa,ia._debug("Ending batch, depth",pa),0>pa)throw"Calls to startBatch() and endBatch() are not paired";0!==pa||l()||ra||z()}function B(){if(!l()){var a={id:m(),channel:"/meta/connect",connectionType:fa.getType()};Aa||(a.advice={timeout:0}),k("connecting"),ia._debug("Connect sent",a),u(!1,[a],!0,"connect"),k("connected")}}function C(){k("connecting"),t(function(){B()})}function D(a){a&&(wa=ia._mixin(!1,{},Ba.advice,a),ia._debug("New advice",wa))}function E(a){if(s(),a&&fa&&fa.abort(),oa=null,k("disconnected"),pa=0,w(),fa=null,qa.length>0){var b=qa;qa=[],Da.call(ia,void 0,b,{reason:"Disconnected"})}}function F(a,b,c){var e=ia.onTransportException;if(d(e)){ia._debug("Invoking transport exception handler",a,b,c);try{e.call(ia,c,a,b)}catch(f){ia._info("Exception during execution of transport exception handler",f)}}}function G(a,b){d(a)&&(b=a,a=void 0),oa=null,j(),l()?(la.reset(),D(Ba.advice)):D(ia._mixin(!1,wa,{reconnect:"retry"})),pa=0,ra=!0,ga=a,ha=b;var c="1.0",e=ia.getURL(),f=la.findTransportTypes(c,ka,e),g={id:m(),version:c,minimumVersion:c,channel:"/meta/handshake",supportedConnectionTypes:f,advice:{timeout:wa.timeout,interval:wa.interval}},h=ia._mixin(!1,{},ga,g);if(ia._putCallback(h.id,b),!fa&&(fa=la.negotiateTransport(f,c,ka,e),!fa)){var i="Could not find initial transport among: "+la.getTransportTypes();throw ia._warn(i),i}ia._debug("Initial transport is",fa.getType()),k("handshaking"),ia._debug("Handshake sent",h),u(!1,[h],!1,"handshake")}function H(){k("handshaking"),ra=!0,t(function(){G(ga,ha)})}function I(a,b){try{a.call(ia,b)}catch(c){var e=ia.onCallbackException;if(d(e)){ia._debug("Invoking callback exception handler",c);try{e.call(ia,c,b)}catch(f){ia._info("Exception during execution of callback exception handler",f)}}else ia._info("Exception during execution of message callback",c)}}function J(a){var b=ia._getCallback([a.id]);d(b)&&(delete xa[a.id],I(b,a))}function K(a){var b=ya[a.id];if(delete ya[a.id],ia._debug("Handling remote call response for",a,"with context",b),b){var c=b.timeout;c&&org.cometd.Utils.clearTimeout(c);var e=b.callback;if(d(e))return I(e,a),!0}return!1}function L(a){J(a),r("/meta/handshake",a),r("/meta/unsuccessful",a);var b=!l()&&"none"!==wa.reconnect;b?(x(),H()):E(!0)}function M(a){if(a.successful){oa=a.clientId;var b=ia.getURL(),c=la.negotiateTransport(a.supportedConnectionTypes,a.version,ka,b);if(null===c){var d="Could not negotiate transport with server; client=["+la.findTransportTypes(a.version,ka,b)+"], server=["+a.supportedConnectionTypes+"]",e=ia.getTransport();return F(e.getType(),null,{reason:d,connectionType:e.getType(),transport:e}),ia._warn(d),void E(!0)}fa!==c&&(ia._debug("Transport",fa.getType(),"->",c.getType()),fa=c),ra=!1,z(),a.reestablish=za,za=!0,J(a),r("/meta/handshake",a);var f=l()?"none":wa.reconnect;switch(f){case"retry":w(),C();break;case"none":E(!0);break;default:throw"Unrecognized advice action "+f}}else L(a)}function N(a){var b="1.0",c=ia.getURL(),d=ia.getTransport(),e=la.findTransportTypes(b,ka,c),f=la.negotiateTransport(e,b,ka,c);f?(ia._debug("Transport",d.getType(),"->",f.getType()),F(d.getType(),f.getType(),a.failure),L(a),fa=f):(F(d.getType(),null,a.failure),ia._warn("Could not negotiate transport; client=["+e+"]"),E(!0),L(a))}function O(a){r("/meta/connect",a),r("/meta/unsuccessful",a);var b=l()?"none":wa.reconnect;switch(b){case"retry":C(),x();break;case"handshake":la.reset(),w(),H();break;case"none":E(!0);break;default:throw"Unrecognized advice action"+b}}function P(a){if(Aa=a.successful){r("/meta/connect",a);var b=l()?"none":wa.reconnect;switch(b){case"retry":w(),C();break;case"none":E(!1);break;default:throw"Unrecognized advice action "+b}}else O(a)}function Q(a){Aa=!1,O(a)}function R(a){E(!0),J(a),r("/meta/disconnect",a),r("/meta/unsuccessful",a)}function S(a){a.successful?(E(!1),J(a),r("/meta/disconnect",a)):R(a)}function T(a){R(a)}function U(a){var b=sa[a.subscription];if(b)for(var c=b.length-1;c>=0;--c){var d=b[c];if(d&&!d.listener){delete b[c],ia._debug("Removed failed subscription",d);break}}J(a),r("/meta/subscribe",a),r("/meta/unsuccessful",a)}function V(a){a.successful?(J(a),r("/meta/subscribe",a)):U(a)}function W(a){U(a)}function X(a){J(a),r("/meta/unsubscribe",a),r("/meta/unsuccessful",a)}function Y(a){a.successful?(J(a),r("/meta/unsubscribe",a)):X(a)}function Z(a){X(a)}function $(a){K(a)||(J(a),r("/meta/publish",a),r("/meta/unsuccessful",a))}function _(a){void 0!==a.data?K(a)||r(a.channel,a):void 0===a.successful?ia._warn("Unknown Bayeux Message",a):a.successful?(J(a),r("/meta/publish",a)):$(a)}function aa(a){$(a)}function ba(a){if(a=o(a),void 0!==a&&null!==a){D(a.advice);var b=a.channel;switch(b){case"/meta/handshake":M(a);break;case"/meta/connect":P(a);break;case"/meta/disconnect":S(a);break;case"/meta/subscribe":V(a);break;case"/meta/unsubscribe":Y(a);break;default:_(a)}}}function ca(a){var b=sa[a];if(b)for(var c=0;c<b.length;++c)if(b[c])return!0;return!1}function da(a,b){var e={scope:a,method:b};if(d(a))e.scope=void 0,e.method=a;else if(c(b)){if(!a)throw"Invalid scope "+a;if(e.method=a[b],!d(e.method))throw"Invalid callback "+b+" for scope "+a}else if(!d(b))throw"Invalid callback "+b;return e}function ea(a,b,c,d){var e=da(b,c);ia._debug("Adding",d?"listener":"subscription","on",a,"with scope",e.scope,"and callback",e.method);var f={channel:a,scope:e.scope,callback:e.method,listener:d},g=sa[a];return g||(g=[],sa[a]=g),f.id=g.push(f)-1,ia._debug("Added",d?"listener":"subscription",f),f[0]=a,f[1]=f.id,f}var fa,ga,ha,ia=this,ja=a||"default",ka=!1,la=new org.cometd.TransportRegistry,ma="disconnected",na=0,oa=null,pa=0,qa=[],ra=!1,sa={},ta=0,ua=null,va=[],wa={},xa={},ya={},za=!1,Aa=!1,Ba={protocol:null,stickyReconnect:!0,connectTimeout:0,maxConnections:2,backoffIncrement:1e3,maxBackoff:6e4,logLevel:"info",reverseIncomingExtensions:!0,maxNetworkDelay:1e4,requestHeaders:{},appendMessageTypeToURL:!0,autoBatch:!1,maxURILength:2e3,advice:{timeout:6e4,interval:0,reconnect:"retry"}};this._mixin=function(a,c){for(var d=c||{},e=2;e<arguments.length;++e){var f=arguments[e];if(void 0!==f&&null!==f)for(var g in f)if(f.hasOwnProperty(g)){var h=b(f,g),i=b(d,g);if(h===c)continue;if(void 0===h)continue;if(a&&"object"==typeof h&&null!==h)if(h instanceof Array)d[g]=this._mixin(a,i instanceof Array?i:[],h);else{var j="object"!=typeof i||i instanceof Array?{}:i;d[g]=this._mixin(a,j,h)}else d[g]=h}}return d},this._warn=function(){f("warn",arguments)},this._info=function(){"warn"!==Ba.logLevel&&f("info",arguments)},this._debug=function(){"debug"===Ba.logLevel&&f("debug",arguments)},this._isCrossDomain=function(a){return a&&a!==window.location.host};var Ca,Da;this.send=v,this._getCallback=function(a){return xa[a]},this._putCallback=function(a,b){var c=this._getCallback(a);return d(b)&&(xa[a]=b),c},this.receive=ba,Ca=function(a){ia._debug("Received",a);for(var b=0;b<a.length;++b){var c=a[b];ba(c)}},Da=function(a,b,c){ia._debug("handleFailure",a,b,c),c.transport=a;for(var d=0;d<b.length;++d){var e=b[d],f={id:e.id,successful:!1,channel:e.channel,failure:c};switch(c.message=e,e.channel){case"/meta/handshake":N(f);break;case"/meta/connect":Q(f);break;case"/meta/disconnect":T(f);break;case"/meta/subscribe":f.subscription=e.subscription,W(f);break;case"/meta/unsubscribe":f.subscription=e.subscription,Z(f);break;default:aa(f)}}},this.registerTransport=function(a,b,c){var e=la.add(a,b,c);return e&&(this._debug("Registered transport",a),d(b.registered)&&b.registered(a,this)),e},this.getTransportTypes=function(){return la.getTransportTypes()},this.unregisterTransport=function(a){var b=la.remove(a);return null!==b&&(this._debug("Unregistered transport",a),d(b.unregistered)&&b.unregistered()),b},this.unregisterTransports=function(){la.clear()},this.findTransport=function(a){return la.find(a)},this.configure=function(a){g.call(this,a)},this.init=function(a,b){this.configure(a),this.handshake(b)},this.handshake=function(a,b){k("disconnected"),za=!1,G(a,b)},this.disconnect=function(a,b,c){if(!l()){"boolean"!=typeof a&&(c=b,b=a,a=!1),d(b)&&(c=b,b=void 0);var e={id:m(),channel:"/meta/disconnect"},f=this._mixin(!1,{},b,e);ia._putCallback(f.id,c),k("disconnecting"),u(a===!0,[f],!1,"disconnect")}},this.startBatch=function(){y()},this.endBatch=function(){A()},this.batch=function(a,b){var c=da(a,b);this.startBatch();try{c.method.call(c.scope),this.endBatch()}catch(d){throw this._info("Exception during execution of batch",d),this.endBatch(),d}},this.addListener=function(a,b,d){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!c(a))throw"Illegal argument type: channel must be a string";return ea(a,b,d,!0)},this.removeListener=function(a){if(!(a&&a.channel&&"id"in a))throw"Invalid argument: expected subscription, not "+a;h(a)},this.clearListeners=function(){sa={}},this.subscribe=function(a,b,e,f,g){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!c(a))throw"Illegal argument type: channel must be a string";if(l())throw"Illegal state: already disconnected";d(b)&&(g=f,f=e,e=b,b=void 0),d(f)&&(g=f,f=void 0);var h=!ca(a),i=ea(a,b,e,!1);if(h){var j={id:m(),channel:"/meta/subscribe",subscription:a},k=this._mixin(!1,{},f,j);ia._putCallback(k.id,g),v(k)}return i},this.unsubscribe=function(a,b,c){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(l())throw"Illegal state: already disconnected";d(b)&&(c=b,b=void 0),this.removeListener(a);var e=a.channel;if(!ca(e)){var f={id:m(),channel:"/meta/unsubscribe",subscription:e},g=this._mixin(!1,{},b,f);ia._putCallback(g.id,c),v(g)}},this.resubscribe=function(a,b){return i(a),a?this.subscribe(a.channel,a.scope,a.callback,b):void 0},this.clearSubscriptions=function(){j()},this.publish=function(a,b,e,f){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(!c(a))throw"Illegal argument type: channel must be a string";if(/^\/meta\//.test(a))throw"Illegal argument: cannot publish to meta channels";if(l())throw"Illegal state: already disconnected";d(b)?(f=b,b=e={}):d(e)&&(f=e,e={});var g={id:m(),channel:a,data:b},h=this._mixin(!1,{},e,g);ia._putCallback(h.id,f),v(h)},this.remoteCall=function(a,b,e,f){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(!c(a))throw"Illegal argument type: target must be a string";if(l())throw"Illegal state: already disconnected";if(d(b)?(f=b,b={},e=Ba.maxNetworkDelay):d(e)&&(f=e,e=Ba.maxNetworkDelay),"number"!=typeof e)throw"Illegal argument type: timeout must be a number";a.match(/^\//)||(a="/"+a);var g="/service"+a,h={id:m(),channel:g,data:b},i={callback:f};e>0&&(i.timeout=org.cometd.Utils.setTimeout(ia,function(){ia._debug("Timing out remote call",h,"after",e,"ms"),$({id:h.id,error:"406::timeout",successful:!1,failure:{message:h,reason:"Remote Call Timeout"}})},e),ia._debug("Scheduled remote call timeout",h,"in",e,"ms")),ya[h.id]=i,v(h)},this.getStatus=function(){return ma},this.isDisconnected=l,this.setBackoffIncrement=function(a){Ba.backoffIncrement=a},this.getBackoffIncrement=function(){return Ba.backoffIncrement},this.getBackoffPeriod=function(){return ta},this.setLogLevel=function(a){Ba.logLevel=a},this.registerExtension=function(a,b){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!c(a))throw"Illegal argument type: extension name must be a string";for(var e=!1,f=0;f<va.length;++f){var g=va[f];if(g.name===a){e=!0;break}}return e?(this._info("Could not register extension with name",a,"since another extension with the same name already exists"),!1):(va.push({name:a,extension:b}),this._debug("Registered extension",a),d(b.registered)&&b.registered(a,this),!0)},this.unregisterExtension=function(a){if(!c(a))throw"Illegal argument type: extension name must be a string";for(var b=!1,e=0;e<va.length;++e){var f=va[e];if(f.name===a){va.splice(e,1),b=!0,this._debug("Unregistered extension",a);var g=f.extension;d(g.unregistered)&&g.unregistered();break}}return b},this.getExtension=function(a){for(var b=0;b<va.length;++b){var c=va[b];if(c.name===a)return c.extension}return null},this.getName=function(){return ja},this.getClientId=function(){return oa},this.getURL=function(){if(fa&&"object"==typeof Ba.urls){var a=Ba.urls[fa.getType()];if(a)return a}return Ba.url},this.getTransport=function(){return fa},this.getConfiguration=function(){return this._mixin(!0,{},Ba)},this.getAdvice=function(){return this._mixin(!0,{},wa)},org.cometd.WebSocket=window.WebSocket},"function"==typeof define&&define.amd&&define("org/cometd",[],function(){return org.cometd}),define("xhr/global/window",[],function(){return window}),define("xhr/once/once",["require","exports","module"],function(a,b,c){function d(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(this,arguments))}}c.exports=d,d.proto=d(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return d(this)},configurable:!0})})}),define("xhr/once",["xhr/once/once"],function(a){return a}),define("xhr/is-function/index",["require","exports","module"],function(a,b,c){function d(a){var b=e.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}c.exports=d;var e=Object.prototype.toString}),define("xhr/is-function",["xhr/is-function/index"],function(a){return a}),define("xhr/trim/index",["require","exports","module"],function(a,b,c){function d(a){return a.replace(/^\s*|\s*$/g,"")}b=c.exports=d,b.left=function(a){return a.replace(/^\s*/,"")},b.right=function(a){return a.replace(/\s*$/,"")}}),define("xhr/trim",["xhr/trim/index"],function(a){return a}),define("xhr/for-each/index",["require","exports","module","xhr/is-function"],function(a,b,c){function d(a,b,c){if(!h(b))throw new TypeError("iterator must be a function");arguments.length<3&&(c=this),"[object Array]"===i.call(a)?e(a,b,c):"string"==typeof a?f(a,b,c):g(a,b,c)}function e(a,b,c){for(var d=0,e=a.length;e>d;d++)j.call(a,d)&&b.call(c,a[d],d,a)}function f(a,b,c){for(var d=0,e=a.length;e>d;d++)b.call(c,a.charAt(d),d,a)}function g(a,b,c){for(var d in a)j.call(a,d)&&b.call(c,a[d],d,a)}var h=a("xhr/is-function");c.exports=d;var i=Object.prototype.toString,j=Object.prototype.hasOwnProperty}),define("xhr/for-each",["xhr/for-each/index"],function(a){return a}),define("xhr/parse-headers/parse-headers",["require","exports","module","xhr/trim","xhr/for-each"],function(a,b,c){var d=a("xhr/trim"),e=a("xhr/for-each"),f=function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.exports=function(a){if(!a)return{};var b={};return e(d(a).split("\n"),function(a){var c=a.indexOf(":"),e=d(a.slice(0,c)).toLowerCase(),g=d(a.slice(c+1));"undefined"==typeof b[e]?b[e]=g:f(b[e])?b[e].push(g):b[e]=[b[e],g]}),b}}),define("xhr/parse-headers",["xhr/parse-headers/parse-headers"],function(a){return a}),define("xhr/xtend/immutable",["require","exports","module"],function(a,b,c){function d(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];for(var d in c)e.call(c,d)&&(a[d]=c[d])}return a}c.exports=d;var e=Object.prototype.hasOwnProperty}),define("xhr/xtend",["xhr/xtend/immutable"],function(a){return a}),define("xhr/index",["require","exports","module","xhr/global/window","xhr/once","xhr/is-function","xhr/parse-headers","xhr/xtend"],function(a,b,c){"use strict";function d(a,b){for(var c=0;c<a.length;c++)b(a[c])}function e(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function f(a,b,c){var d=a;return l(b)?(c=b,"string"==typeof a&&(d={uri:a})):d=n(b,{uri:a}),d.callback=c,d}function g(a,b,c){return b=f(a,b,c),h(b)}function h(a){function b(){4===j.readyState&&f()}function c(){var a=void 0;if(j.response?a=j.response:"text"!==j.responseType&&j.responseType||(a=j.responseText||j.responseXML),u)try{a=v(a)}catch(b){}return a}function d(a){clearTimeout(o),a instanceof Error||(a=new Error(""+(a||"Unknown XMLHttpRequest Error"))),a.statusCode=0,h(a,i)}function f(){if(!n){var b;clearTimeout(o),b=a.useXDR&&void 0===j.status?200:1223===j.status?204:j.status;var d=i,e=null;0!==b?(d={body:c(),statusCode:b,method:q,headers:{},url:p,rawRequest:j},j.getAllResponseHeaders&&(d.headers=m(j.getAllResponseHeaders()))):e=new Error("Internal XMLHttpRequest Error"),h(e,d,d.body)}}var h=a.callback;if("undefined"==typeof h)throw new Error("callback argument missing");h=k(h);var i={body:void 0,headers:{},statusCode:0,method:q,url:p,rawRequest:j},j=a.xhr||null;j||(j=a.cors||a.useXDR?new g.XDomainRequest:new g.XMLHttpRequest);var l,n,o,p=j.url=a.uri||a.url,q=j.method=a.method||"GET",r=a.body||a.data||null,s=j.headers=a.headers||{},t=!!a.sync,u=!1,v=a.fromJSON||JSON.parse,w=a.toJSON||JSON.stringify;if("json"in a&&(u=!0,s.accept||s.Accept||(s.Accept="application/json"),"GET"!==q&&"HEAD"!==q&&(s["content-type"]||s["Content-Type"]||(s["Content-Type"]="application/json;charset=UTF-8"),r=w(a.json))),j.onreadystatechange=b,j.onload=f,j.onerror=d,j.onprogress=function(){},j.ontimeout=d,j.open(q,p,!t,a.username,a.password),t||(j.withCredentials=!!a.withCredentials),!t&&a.timeout>0&&(o=setTimeout(function(){n=!0,j.abort("timeout");var a=new Error("XMLHttpRequest timeout");a.code="ETIMEDOUT",d(a)},a.timeout)),j.setRequestHeader)for(l in s)s.hasOwnProperty(l)&&j.setRequestHeader(l,s[l]);else if(a.headers&&!e(a.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(j.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(j),j.send(r),j}function i(){}var j=a("xhr/global/window"),k=a("xhr/once"),l=a("xhr/is-function"),m=a("xhr/parse-headers"),n=a("xhr/xtend");c.exports=g,g.XMLHttpRequest=j.XMLHttpRequest||i,g.XDomainRequest="withCredentials"in new g.XMLHttpRequest?g.XMLHttpRequest:j.XDomainRequest,d(["get","put","post","patch","head","delete"],function(a){g["delete"===a?"del":a]=function(b,c,d){return c=f(b,c,d),c.method=a.toUpperCase(),h(c)}})}),define("xhr",["xhr/index"],function(a){return a}),define("ectxml/cometd/main",["org/cometd","xhr"],function(a,b){function c(a){return a}a.JSON.toJSON=JSON.stringify,a.JSON.fromJSON=JSON.parse;var d=function(d){function e(){var d=new a.LongPollingTransport,e=a.Transport.derive(d);return e.xhrSend=function(a){var d=b({method:"POST",url:a.url,sync:a.sync===!0,headers:a.headers,json:a.body,toJSON:c,fromJSON:c,withCredentials:!0},function(b,c){null==b?a.onSuccess(c.body):a.onError(b.message,b)});return d},e}var f=new a.CometD(d);return a.WebSocket&&f.registerTransport("websocket",new a.WebSocketTransport),f.registerTransport("long-polling",new e),f};return d}),define("ectxml/cometd",["ectxml/cometd/main"],function(a){return a}),function(){function a(a){return a.AckExtension=function(){function a(a,c){b._debug(a,c)}var b,c=!1,d=-1;this.registered=function(c,d){b=d,a("AckExtension: executing registration callback")},this.unregistered=function(){a("AckExtension: executing unregistration callback"),b=null},this.incoming=function(b){var e=b.channel;if("/meta/handshake"==e)c=b.ext&&b.ext.ack,a("AckExtension: server supports acks",c);else if("/meta/connect"==e&&b.successful&&c){var f=b.ext;f&&"number"==typeof f.ack&&(d=f.ack,a("AckExtension: server sent ack id",d))}return b},this.outgoing=function(e){var f=e.channel;return"/meta/handshake"==f?(e.ext||(e.ext={}),e.ext.ack=b&&b.ackEnabled!==!1,d=-1):"/meta/connect"==f&&c&&(e.ext||(e.ext={}),e.ext.ack=d,a("AckExtension: client sending ack id",d)),e}}}"function"==typeof define&&define.amd?define("org/cometd/AckExtension",["org/cometd"],a):a(org.cometd)}(),define("domReady",[],function(){"use strict";function a(a){var b;for(b=0;b<a.length;b+=1)a[b](j)}function b(){var b=k;i&&b.length&&(k=[],a(b))}function c(){i||(i=!0,g&&clearInterval(g),b())}function d(a){return i?a(j):k.push(a),d}var e,f,g,h="undefined"!=typeof window&&window.document,i=!h,j=h?document:null,k=[];if(h){if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1);else if(window.attachEvent){window.attachEvent("onload",c),f=document.createElement("div");try{e=null===window.frameElement}catch(l){}f.doScroll&&e&&window.external&&(g=setInterval(function(){try{f.doScroll(),c()}catch(a){}},30))}"complete"===document.readyState&&c()}return d.version="2.0.1",d.load=function(a,b,c,e){e.isBuild?c(null):d(c)},d}),define("ectxml/pubSub",["./cometd","org/cometd/AckExtension","domReady!"],function(a,b){var c=function(){function d(a){if(w.isDisconnected())return void(p=!1);var b=p;if(p=a.successful,!b&&a.successful)k&&"function"==typeof k.connected&&k.connected();else if(b&&!a.successful){var c=a.error;null==c&&(c=f(a)),k&&"function"==typeof k.broken&&k.broken(c,a)}}function e(a){if(p=!1,!a.id||a.successful===!0){var b=!1;if(null!=a.advice){var c=a.advice.reconnect;null!=c&&"handshake"==c&&(b=!0)}g(),k&&"function"==typeof k.disconnected&&k.disconnected(b),b&&i()}}function f(a){var b=a.failure;if(null!=b){var c="",d=null;b.connectionType&&(c+=b.connectionType);var e=b.webSocketCode,f=b.httpCode;if((null!=e||null!=f)&&(c.length>0&&(c+=","),c+=null!=e?e:f),b.reason)d=b.reason;else if(b.exception){var g=b.exception;g instanceof String?d=g:g.message&&(d=g.message)}var h="901";return 200!=f&&403!=f&&511!=f||!b.exception?(null==d||0==d.length)&&(d="server error"):(h="902",d="proxy error"),h+":"+c+":"+d}return null}function g(){p=!1,w.removeListener(t),t=null,w.removeListener(u),u=null,h(!0)}function h(a){for(var b in r){var c=0===b.indexOf("/service/");a&&c&&w.removeListener(r[b]),(a||!c)&&delete r[b]}}function i(){if(p)throw"already connected";setTimeout(function(){v.connect(n)},100)}if(this instanceof c==!1)throw"PubSub must be instantiated: new PubSub()";var j=null,k=null,l=!1,m=!1,n=null,o=!1,p=!1,q=!0,r={},s={},t=null,u=null,v=this,w=new a;w.registerExtension("ack",new b),w.onListenerException=function(a){console.log("uncaught exception:",a)},window.addEventListener("beforeunload",function(){w.disconnect(!0)},!1),this.getUrl=function(){return j},this.isConnected=function(){return p&&!w.isDisconnected()},this.configure=function(a,b,c,d,e){if(p)throw"already connected";if(null==a)throw"url required";j=a,k=b,l=c===!0,m=d===!0,o=!0,w.configure({url:j,logLevel:e||"info",autoBatch:!0})},this.connect=function(a,b){if(p)throw"already connected";if(!o)throw"not configured";if(null!=a&&a.role&&"USER"!==a.role&&"SYSTEM"!==a.role&&"SERVICE"!==a.role)throw"unknown role specified (should be undefined or one of USER, SYSTEM, SERVICE)";n=a,null==t&&(t=w.addListener("/meta/connect",d)),null==u&&(u=w.addListener("/meta/disconnect",e));var c=null;null!=a&&(c={ext:{"com.ect.cometd.security":{owner:a.owner,application:a.application,name:a.name,password:a.password,role:a.role,properties:a.properties,_class:"com.ect.cometd.security.Credentials"}}});var g=function(a){h(!1);var c=null,d=!0;if(a.successful!==!0)if(c=a.error,null==c){var e=a.failure;if(null!=e)if(e.websocketCode)d=!1;else{var g=e.httpCode;null==g||0==g?(c="900::no connection to server",q&&!l&&setTimeout(function(){v.connect(n,b)},2e3)):c=f(a),l&&w.disconnect()}}else 0===c.indexOf("403:")&&m&&setTimeout(function(){v.connect(n,b)},2e3);else q=!1;if(p=a.successful===!0,d){var i=a.ext&&a.ext["com.ect.cometd.security.Passport"];k&&"function"==typeof k.initialization&&k.initialization(a.successful,i,c,a),"function"==typeof b&&b(a.successful,i,c,a),k&&"function"==typeof k.connected&&a.successful&&k.connected()}};w.handshake(c,g)},this.subscribe=function(a,b,c){if(0!==a.indexOf("/service/")&&!p)throw"not connected";var d=r[a];if(d)throw"already subscribed to "+a;var e=function(b){var d=null;if(b.successful!==!0){var e=r[b.subscription];e&&(w.removeListener(e),delete r[b.subscription]),d=b.error,null==d&&(d=f(b))}k&&"function"==typeof k.subscription&&k.subscription(b.successful,b.subscription||a,d),"function"==typeof c&&c(b.successful,b.subscription||a,d)};0===a.indexOf("/service/")?(r[a]=w.addListener(a,function(a){"function"==typeof b&&b(a.channel,a.data)}),e({successful:!0,subscription:a})):r[a]=w.subscribe(a,function(a){"function"==typeof b&&b(a.channel,a.data)},e)},this.isSubscribed=function(a){return null!=r[a]},this.unsubscribe=function(a){if(0!==a.indexOf("/service/")&&!p)throw"not connected";var b=r[a];if(null==b)throw"not subscribed to "+a;delete r[a],0===a.indexOf("/service/")?w.removeListener(b):w.unsubscribe(b)},this.publish=function(a,b,c){if(!p)throw"not connected";var d=function(d){var e=null,g=!0;d.successful||(d.advice&&d.advice.retry?(g=!1,setTimeout(function(){v.publish(a,b,c)},d.advice.retry)):(e=d.error,null==e&&(e=f(d)))),g&&(k&&"function"==typeof k.publishing&&k.publishing(d.successful,e,d),"function"==typeof c&&c(d.successful,e,d))};w.publish(a,b,d)},this.disconnect=function(){w.disconnect(),n=null},this.terminate=function(){var a=w.getTransport();null!=a&&a.abort(),p&&(p=!1,g()),j=null,k=null,n=null,o=!1;for(var b in s)this.unregisterExtension(b)},this.registerExtension=function(a,b){w.registerExtension(a,b),s[a]=null},this.unregisterExtension=function(a){w.unregisterExtension(a),delete s[a]},this.disableWebsockets=function(a){w.websocketEnabled=a===!1}};return c.version="2.0.0",c}),define("ectxml/pubSubManager",["./pubSub"],function(a){var b=function(c,d,e,f,g,h){function i(){for(var a=0;a<t.length;a++)"function"==typeof t[a].connected&&t[a].connected();for(var b in s)m(b);for(var b;v.length>0&&o.isConnected();)b=v[0].channel,o.publish(b,v[0].msg,v[0].sendCallback),v.shift()}function j(a){for(var b in s){for(var c=s[b],d=c.length;d--;){var e=c[d];"function"==typeof e.disconnected&&e.disconnected(b,a),a&&e.unregisterOnSessionEnd!==!1&&c.splice(d,1)}0==c.length&&delete s[b]}for(var d=t.length;d--;){var e=t[d];"function"==typeof e.disconnected&&e.disconnected(a),a&&e.unregisterOnSessionEnd!==!1&&t.splice(d,1)}}function k(a){for(var b=s[a],c=0;c<b.length;c++)"function"==typeof b[c].activated&&b[c].activated(a)}function l(a,b){for(var c=s[a],d=0;d<c.length;d++)"function"==typeof c[d].error&&c[d].error(a,b)}function m(a){(o.isConnected()||0===a.indexOf("/service/"))&&(o.isSubscribed(a)?k(a):o.subscribe(a,function(b,c){for(var d=s[a],e=0;e<d.length;e++)d[e].messageReceived(b,c)},function(a,b,c){for(var d=s[b],e=0;e<d.length;e++)"function"==typeof d[e].subscription&&d[e].subscription(a,b,c)}))}function n(a){o.isSubscribed(a)&&o.unsubscribe(a)}if(this instanceof b==!1)throw"PubSubManager must be instantiated: new PubSubManager()";var o=new a,p=b.Status.DISCONNECTED,q=null,r=null,s={},t=[],u=1,v=[],w=!1,x=!1;o.configure(c,{initialization:function(a,c,d,f){a?(q=null!=c?c.uuid:null,r=null!=c?c.properties:null,p=x?b.Status.DISCONNECTING:b.Status.CONNECTED):(p=b.Status.DISCONNECTED,q=null,r=null),x===!1&&e&&"function"==typeof e.initialization&&e.initialization(a,c,d,f)},subscription:function(a,b,c){a?k(b):l(b,c),e&&"function"==typeof e.subscription&&e.subscription(a,b,c)},publishing:function(a,b,c){e&&"function"==typeof e.publishing&&e.publishing(a,b,c)},connected:function(){p=x?b.Status.DISCONNECTING:b.Status.CONNECTED,x?(x=!1,setTimeout(function(){o.disconnect()},10)):(i(),e&&"function"==typeof e.connected&&e.connected())},disconnected:function(a){p=a?b.Status.BROKEN:w?b.Status.CONNECTING:b.Status.DISCONNECTED,j(!a),e&&"function"==typeof e.disconnected&&e.disconnected(a),w&&!a&&(w=!1,setTimeout(function(){o.connect(d)},10))},broken:function(a,c){p=b.Status.BROKEN,j(!1),e&&"function"==typeof e.broken&&e.broken(a,c)}},f,g,h),this.getUuid=function(){return q},this.getAppProperties=function(){return r},this.registerConnectionListener=function(a){t.push(a)},this.unregisterConnectionListener=function(a){var b=t.indexOf(a);b>=0&&t.splice(b,1)},this.registerMessageListener=function(a,b){s[a]||(s[a]=[]),s[a].push(b),m(a)},this.unregisterMessageListener=function(a,b){var c=s[a];if(null==b)delete s[a],n(a);else if(null!=c){var d=c.indexOf(b);d>=0&&c.splice(d,1),0==c.length&&this.unregisterMessageListener(a)}},this.registerExtension=function(a,b){o.registerExtension(a,b)},this.unregisterExtension=function(a){o.unregisterExtension(a)},this.isRegistered=function(a){return null!=s[a]},this.getStatus=function(){return p},this.sendMessage=function(a,b,c){if(o.isConnected())return o.publish(a,b,c),0;var d=u++;return v.push({channel:a,msg:b,id:d,sendCallback:c}),d},this.isQueued=function(a){for(var b=0;b<v.length;b++)if(v[b].id==a)return!0;return!1},this.removeFromQueue=function(a){for(var b=0;b<v.length;b++)if(v[b].id==a)return v.splice(b,1),!0;return!1},this.start=function(a,c){"function"!=typeof a||c||(c=a,a=null),a&&(d=a),p==b.Status.DISCONNECTED?(p=b.Status.CONNECTING,o.connect(d,c)):p==b.Status.DISCONNECTING&&(w=!0)},this.stop=function(){p!=b.Status.DISCONNECTED&&p!=b.Status.DISCONNECTING&&(p==b.Status.CONNECTING?x=!0:(p=b.Status.DISCONNECTING,o.disconnect()))},this.disableWebsockets=function(a){o.disableWebsockets(a)}};return b.Status={DISCONNECTED:"disconnected",CONNECTING:"connecting",CONNECTED:"connected",BROKEN:"broken",DISCONNECTING:"disconnecting"},b.version="2.0.0",b}),define("ectxml/pubSubReqRes",[],function(){var a=function(b,c,d){function e(a){this.messageReceived=function(c,d){var e=d.msgId;if(null!=e){var g=d.type,h=f[e];h?("PROGRESS"!==g&&(delete f[e],clearTimeout(h.timerHandle),b.unregisterMessageListener(c,h.listener)),a.response&&a.response(d)):console&&console.debug&&console.debug("unknown response message received (matching no request)",d)}else console&&console.debug&&console.debug("unknown response message received without msgId",d)}}if(this instanceof a==!1)throw"PubSubRequestResponse must be instantiated: new PubSubRequestResponse()";var f={};d=d||5e3,this.sendRequest=function(a,d,e){var f=a.msgId;null==f&&(f=(Math.random()*(new Date).getTime()).toString(36),a.msgId=f),this.receiveResponse(f,d,e,function(e){return b.sendMessage(c,a,function(a,b){a||(clearTimeout(e),d.response({msgId:f,type:"ERROR",failure:"DELIVERY_FAILED",data:{details:b}}))})})},this.receiveResponse=function(a,g,h,i){var j=new e(g);b.registerMessageListener(c,j);var k=setTimeout(function(){var d=f[a];d&&(delete f[a],d.msgId>0&&b.removeFromQueue(d.msgId),b.unregisterMessageListener(c,j),g&&g.timeout&&g.timeout())},h||d);f[a]={listener:j,timerHandle:k,msgId:i?i(k):0}}};return a.version="2.0.0",a}),define("ectxml/cometd/jquery.cookie",[],function(){return function(a,b,c){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(b))||null===b||void 0===b)){if(c=$.extend({},c),(null===b||void 0===b)&&(c.expires=-1),"number"==typeof c.expires){var d=c.expires,e=c.expires=new Date;e.setDate(e.getDate()+d);

}return b=String(b),document.cookie=[encodeURIComponent(a),"=",c.raw?b:encodeURIComponent(b),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}c=b||{};for(var f,g=c.raw?function(a){return a}:decodeURIComponent,h=document.cookie.split("; "),i=0;f=h[i]&&h[i].split("=");i++)if(g(f[0])===a)return g(f[1]||"");return null}}),function(){function a(a){return a.COOKIE||(a.COOKIE={},a.COOKIE.set=function(){throw"Abstract"},a.COOKIE.get=function(){throw"Abstract"}),a.ReloadExtension=function(b){function c(b){if(h.handshakeResponse){m=!0;var c=f.getTransport();c&&c.abort(),e(b),h.cookiePath=j;var d=a.JSON.toJSON(h);g("Reload extension saving cookie value",d),a.COOKIE.set(i,d,{"max-age":k,path:j,expires:new Date((new Date).getTime()+1e3*k)})}}function d(a){return h.url==a.url}function e(a){a&&("number"==typeof a.cookieMaxAge&&(k=a.cookieMaxAge),"string"==typeof a.cookieName&&(i=a.cookieName),"string"==typeof a.cookiePath&&(j=a.cookiePath))}var f,g,h={},i="org.cometd.reload",j="/",k=5,l=!1,m=!1;this.configure=e,this.registered=function(a,b){f=b,f.reload=c,g=f._debug},this.unregistered=function(){delete f.reload,f=null},this.outgoing=function(b){switch(b.channel){case"/meta/handshake":h={},h.url=f.getURL();var c=a.COOKIE.get(i);if(g("Reload extension found cookie value",c),c)try{var e=a.JSON.fromJSON(c);if(a.COOKIE.set(i,"",{"max-age":-1,path:e.cookiePath,expires:-1}),e.handshakeResponse&&d(e)){g("Reload extension restoring state",e);var j=f._getCallback(b.id);return setTimeout(function(){g("Reload extension replaying handshake response",e.handshakeResponse),h.handshakeResponse=e.handshakeResponse,h.transportType=e.transportType,f._putCallback(b.id,j);var a=f._mixin(!0,{},h.handshakeResponse,{id:b.id,ext:{reload:!0}});a.supportedConnectionTypes=[h.transportType],f.receive(a),g("Reload extension replayed handshake response",a)},0),l||(l=!0,f.startBatch()),null}g("Reload extension could not restore state",e)}catch(k){g("Reload extension error while trying to restore cookie",k)}break;case"/meta/connect":if(m===!0)return g("Reload extension aborting /meta/connect during reload"),null;h.transportType||(h.transportType=b.connectionType,g("Reload extension tracked transport type",h.transportType));break;case"/meta/disconnect":h={}}return b},this.incoming=function(a){if(a.successful)switch(a.channel){case"/meta/handshake":h.handshakeResponse||(h.handshakeResponse=a,g("Reload extension tracked handshake response",a));break;case"/meta/connect":l&&(l=!1,f.endBatch());break;case"/meta/disconnect":h={}}return a},e(b)}}"function"==typeof define&&define.amd?define("org/cometd/ReloadExtension",["org/cometd"],a):a(org.cometd)}(),define("ectxml/cometd/reload",["org/cometd","./jquery.cookie","org/cometd/ReloadExtension"],function(a,b,c){return a.COOKIE.set=b,a.COOKIE.get=b,c}),function(){function a(a){return a.TimeStampExtension=function(){this.outgoing=function(a){return a.timestamp=(new Date).toUTCString(),a}}}"function"==typeof define&&define.amd?define("org/cometd/TimeStampExtension",["org/cometd"],a):a(org.cometd)}(),function(){function a(a){return a.TimeSyncExtension=function(b){function c(a,b){d._debug(a,b)}var d,e=b&&b.maxSamples||10,f=[],g=[],h=0,i=0;this.registered=function(a,b){d=b,c("TimeSyncExtension: executing registration callback")},this.unregistered=function(){c("TimeSyncExtension: executing unregistration callback"),d=null,f=[],g=[]},this.incoming=function(a){var b=a.channel;if(b&&0===b.indexOf("/meta/")&&a.ext&&a.ext.timesync){var d=a.ext.timesync;c("TimeSyncExtension: server sent timesync",d);var j=(new Date).getTime(),k=(j-d.tc-d.p)/2,l=d.ts-d.tc-k;f.push(k),g.push(l),g.length>e&&(g.shift(),f.shift());for(var m=g.length,n=0,o=0,p=0;m>p;++p)n+=f[p],o+=g[p];h=parseInt((n/m).toFixed()),i=parseInt((o/m).toFixed()),c("TimeSyncExtension: network lag",h,"ms, time offset with server",i,"ms",h,i)}return a},this.outgoing=function(b){var d=b.channel;return d&&0===d.indexOf("/meta/")&&(b.ext||(b.ext={}),b.ext.timesync={tc:(new Date).getTime(),l:h,o:i},c("TimeSyncExtension: client sending timesync",a.JSON.toJSON(b.ext.timesync))),b},this.getTimeOffset=function(){return i},this.getTimeOffsetSamples=function(){return g},this.getNetworkLag=function(){return h},this.getServerTime=function(){return(new Date).getTime()+i},this.getServerDate=function(){return new Date(this.getServerTime())},this.setTimeout=function(b,c){var e=c instanceof Date?c.getTime():0+c,f=e-i,g=f-(new Date).getTime();return 0>=g&&(g=1),a.Utils.setTimeout(d,b,g)}}}"function"==typeof define&&define.amd?define("org/cometd/TimeSyncExtension",["org/cometd"],a):a(org.cometd)}(),function(a){"use strict";if("function"==typeof bootstrap)bootstrap("promise",a);else if("object"==typeof exports&&"object"==typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define("q/q",a);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=a}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var b="undefined"!=typeof window?window:self,c=b.Q;b.Q=a(),b.Q.noConflict=function(){return b.Q=c,this}}}(function(){"use strict";function a(a){return function(){return W.apply(a,arguments)}}function b(a){return a===Object(a)}function c(a){return"[object StopIteration]"===ca(a)||a instanceof S}function d(a,b){if(P&&b.stack&&"object"==typeof a&&null!==a&&a.stack&&-1===a.stack.indexOf(da)){for(var c=[],d=b;d;d=d.source)d.stack&&c.unshift(d.stack);c.unshift(a.stack);var f=c.join("\n"+da+"\n");a.stack=e(f)}}function e(a){for(var b=a.split("\n"),c=[],d=0;d<b.length;++d){var e=b[d];h(e)||f(e)||!e||c.push(e)}return c.join("\n")}function f(a){return-1!==a.indexOf("(module.js:")||-1!==a.indexOf("(node.js:")}function g(a){var b=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(b)return[b[1],Number(b[2])];var c=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a);if(c)return[c[1],Number(c[2])];var d=/.*@(.+):(\d+)$/.exec(a);return d?[d[1],Number(d[2])]:void 0}function h(a){var b=g(a);if(!b)return!1;var c=b[0],d=b[1];return c===R&&d>=T&&ia>=d}function i(){if(P)try{throw new Error}catch(a){var b=a.stack.split("\n"),c=b[0].indexOf("@")>0?b[1]:b[2],d=g(c);if(!d)return;return R=d[0],d[1]}}function j(a,b,c){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(b+" is deprecated, use "+c+" instead.",new Error("").stack),a.apply(a,arguments)}}function k(a){return a instanceof o?a:s(a)?B(a):A(a)}function l(){function a(a){b=a,k.longStackSupport&&P&&(f.source=a),Y(c,function(b,c){k.nextTick(function(){a.promiseDispatch.apply(a,c)})},void 0),c=void 0,d=void 0}var b,c=[],d=[],e=_(l.prototype),f=_(o.prototype);if(f.promiseDispatch=function(a,e,f){var g=X(arguments);c?(c.push(g),"when"===e&&f[1]&&d.push(f[1])):k.nextTick(function(){b.promiseDispatch.apply(b,g)})},f.valueOf=function(){if(c)return f;var a=q(b);return r(a)&&(b=a),a},f.inspect=function(){return b?b.inspect():{state:"pending"}},k.longStackSupport&&P)try{throw new Error}catch(g){f.stack=g.stack.substring(g.stack.indexOf("\n")+1)}return e.promise=f,e.resolve=function(c){b||a(k(c))},e.fulfill=function(c){b||a(A(c))},e.reject=function(c){b||a(z(c))},e.notify=function(a){b||Y(d,function(b,c){k.nextTick(function(){c(a)})},void 0)},e}function m(a){if("function"!=typeof a)throw new TypeError("resolver must be a function.");var b=l();try{a(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}return b.promise}function n(a){return m(function(b,c){for(var d=0,e=a.length;e>d;d++)k(a[d]).then(b,c)})}function o(a,b,c){void 0===b&&(b=function(a){return z(new Error("Promise does not support operation: "+a))}),void 0===c&&(c=function(){return{state:"unknown"}});var d=_(o.prototype);if(d.promiseDispatch=function(c,e,f){var g;try{g=a[e]?a[e].apply(d,f):b.call(d,e,f)}catch(h){g=z(h)}c&&c(g)},d.inspect=c,c){var e=c();"rejected"===e.state&&(d.exception=e.reason),d.valueOf=function(){var a=c();return"pending"===a.state||"rejected"===a.state?d:a.value}}return d}function p(a,b,c,d){return k(a).then(b,c,d)}function q(a){if(r(a)){var b=a.inspect();if("fulfilled"===b.state)return b.value}return a}function r(a){return a instanceof o}function s(a){return b(a)&&"function"==typeof a.then}function t(a){return r(a)&&"pending"===a.inspect().state}function u(a){return!r(a)||"fulfilled"===a.inspect().state}function v(a){return r(a)&&"rejected"===a.inspect().state}function w(){ea.length=0,fa.length=0,ha||(ha=!0)}function x(a,b){ha&&("object"==typeof process&&"function"==typeof process.emit&&k.nextTick.runAfter(function(){-1!==Z(fa,a)&&(process.emit("unhandledRejection",b,a),ga.push(a))}),fa.push(a),ea.push(b&&"undefined"!=typeof b.stack?b.stack:"(no stack) "+b))}function y(a){if(ha){var b=Z(fa,a);-1!==b&&("object"==typeof process&&"function"==typeof process.emit&&k.nextTick.runAfter(function(){var c=Z(ga,a);-1!==c&&(process.emit("rejectionHandled",ea[b],a),ga.splice(c,1))}),fa.splice(b,1),ea.splice(b,1))}}function z(a){var b=o({when:function(b){return b&&y(this),b?b(a):this}},function(){return this},function(){return{state:"rejected",reason:a}});return x(b,a),b}function A(a){return o({when:function(){return a},get:function(b){return a[b]},set:function(b,c){a[b]=c},"delete":function(b){delete a[b]},post:function(b,c){return null===b||void 0===b?a.apply(void 0,c):a[b].apply(a,c)},apply:function(b,c){return a.apply(b,c)},keys:function(){return ba(a)}},void 0,function(){return{state:"fulfilled",value:a}})}function B(a){var b=l();return k.nextTick(function(){try{a.then(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}}),b.promise}function C(a){return o({isDef:function(){}},function(b,c){return I(a,b,c)},function(){return k(a).inspect()})}function D(a,b,c){return k(a).spread(b,c)}function E(a){return function(){function b(a,b){var g;if("undefined"==typeof StopIteration){try{g=d[a](b)}catch(h){return z(h)}return g.done?k(g.value):p(g.value,e,f)}try{g=d[a](b)}catch(h){return c(h)?k(h.value):z(h)}return p(g,e,f)}var d=a.apply(this,arguments),e=b.bind(b,"next"),f=b.bind(b,"throw");return e()}}function F(a){k.done(k.async(a)())}function G(a){throw new S(a)}function H(a){return function(){return D([this,J(arguments)],function(b,c){return a.apply(b,c)})}}function I(a,b,c){return k(a).dispatch(b,c)}function J(a){return p(a,function(a){var b=0,c=l();return Y(a,function(d,e,f){var g;r(e)&&"fulfilled"===(g=e.inspect()).state?a[f]=g.value:(++b,p(e,function(d){a[f]=d,0===--b&&c.resolve(a)},c.reject,function(a){c.notify({index:f,value:a})}))},void 0),0===b&&c.resolve(a),c.promise})}function K(a){if(0===a.length)return k.resolve();var b=k.defer(),c=0;return Y(a,function(d,e,f){function g(a){b.resolve(a)}function h(a){c--,0===c&&(a.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+a.message,b.reject(a))}function i(a){b.notify({index:f,value:a})}var j=a[f];c++,p(j,g,h,i)},void 0),b.promise}function L(a){return p(a,function(a){return a=$(a,k),p(J($(a,function(a){return p(a,U,U)})),function(){return a})})}function M(a){return k(a).allSettled()}function N(a,b){return k(a).then(void 0,void 0,b)}function O(a,b){return k(a).nodeify(b)}var P=!1;try{throw new Error}catch(Q){P=!!Q.stack}var R,S,T=i(),U=function(){},V=function(){function a(){for(var a,d;c.next;)c=c.next,a=c.task,c.task=void 0,d=c.domain,d&&(c.domain=void 0,d.enter()),b(a,d);for(;h.length;)a=h.pop(),b(a);e=!1}function b(b,c){try{b()}catch(d){if(g)throw c&&c.exit(),setTimeout(a,0),c&&c.enter(),d;setTimeout(function(){throw d},0)}c&&c.exit()}var c={task:void 0,next:null},d=c,e=!1,f=void 0,g=!1,h=[];if(V=function(a){d=d.next={task:a,domain:g&&process.domain,next:null},e||(e=!0,f())},"object"==typeof process&&"[object process]"===process.toString()&&process.nextTick)g=!0,f=function(){process.nextTick(a)};else if("function"==typeof setImmediate)f="undefined"!=typeof window?setImmediate.bind(window,a):function(){setImmediate(a)};else if("undefined"!=typeof MessageChannel){var i=new MessageChannel;i.port1.onmessage=function(){f=j,i.port1.onmessage=a,a()};var j=function(){i.port2.postMessage(0)};f=function(){setTimeout(a,0),j()}}else f=function(){setTimeout(a,0)};return V.runAfter=function(a){h.push(a),e||(e=!0,f())},V}(),W=Function.call,X=a(Array.prototype.slice),Y=a(Array.prototype.reduce||function(a,b){var c=0,d=this.length;if(1===arguments.length)for(;;){if(c in this){b=this[c++];break}if(++c>=d)throw new TypeError}for(;d>c;c++)c in this&&(b=a(b,this[c],c));return b}),Z=a(Array.prototype.indexOf||function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),$=a(Array.prototype.map||function(a,b){var c=this,d=[];return Y(c,function(e,f,g){d.push(a.call(b,f,g,c))},void 0),d}),_=Object.create||function(a){function b(){}return b.prototype=a,new b},aa=a(Object.prototype.hasOwnProperty),ba=Object.keys||function(a){var b=[];for(var c in a)aa(a,c)&&b.push(c);return b},ca=a(Object.prototype.toString);S="undefined"!=typeof ReturnValue?ReturnValue:function(a){this.value=a};var da="From previous event:";k.resolve=k,k.nextTick=V,k.longStackSupport=!1,"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(k.longStackSupport=!0),k.defer=l,l.prototype.makeNodeResolver=function(){var a=this;return function(b,c){b?a.reject(b):a.resolve(arguments.length>2?X(arguments,1):c)}},k.Promise=m,k.promise=m,m.race=n,m.all=J,m.reject=z,m.resolve=k,k.passByCopy=function(a){return a},o.prototype.passByCopy=function(){return this},k.join=function(a,b){return k(a).join(b)},o.prototype.join=function(a){return k([this,a]).spread(function(a,b){if(a===b)return a;throw new Error("Q can't join: not the same: "+a+" "+b)})},k.race=n,o.prototype.race=function(){return this.then(k.race)},k.makePromise=o,o.prototype.toString=function(){return"[object Promise]"},o.prototype.then=function(a,b,c){function e(b){try{return"function"==typeof a?a(b):b}catch(c){return z(c)}}function f(a){if("function"==typeof b){d(a,h);try{return b(a)}catch(c){return z(c)}}return z(a)}function g(a){return"function"==typeof c?c(a):a}var h=this,i=l(),j=!1;return k.nextTick(function(){h.promiseDispatch(function(a){j||(j=!0,i.resolve(e(a)))},"when",[function(a){j||(j=!0,i.resolve(f(a)))}])}),h.promiseDispatch(void 0,"when",[void 0,function(a){var b,c=!1;try{b=g(a)}catch(d){if(c=!0,!k.onerror)throw d;k.onerror(d)}c||i.notify(b)}]),i.promise},k.tap=function(a,b){return k(a).tap(b)},o.prototype.tap=function(a){return a=k(a),this.then(function(b){return a.fcall(b).thenResolve(b)})},k.when=p,o.prototype.thenResolve=function(a){return this.then(function(){return a})},k.thenResolve=function(a,b){return k(a).thenResolve(b)},o.prototype.thenReject=function(a){return this.then(function(){throw a})},k.thenReject=function(a,b){return k(a).thenReject(b)},k.nearer=q,k.isPromise=r,k.isPromiseAlike=s,k.isPending=t,o.prototype.isPending=function(){return"pending"===this.inspect().state},k.isFulfilled=u,o.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},k.isRejected=v,o.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ea=[],fa=[],ga=[],ha=!0;k.resetUnhandledRejections=w,k.getUnhandledReasons=function(){return ea.slice()},k.stopUnhandledRejectionTracking=function(){w(),ha=!1},w(),k.reject=z,k.fulfill=A,k.master=C,k.spread=D,o.prototype.spread=function(a,b){return this.all().then(function(b){return a.apply(void 0,b)},b)},k.async=E,k.spawn=F,k["return"]=G,k.promised=H,k.dispatch=I,o.prototype.dispatch=function(a,b){var c=this,d=l();return k.nextTick(function(){c.promiseDispatch(d.resolve,a,b)}),d.promise},k.get=function(a,b){return k(a).dispatch("get",[b])},o.prototype.get=function(a){return this.dispatch("get",[a])},k.set=function(a,b,c){return k(a).dispatch("set",[b,c])},o.prototype.set=function(a,b){return this.dispatch("set",[a,b])},k.del=k["delete"]=function(a,b){return k(a).dispatch("delete",[b])},o.prototype.del=o.prototype["delete"]=function(a){return this.dispatch("delete",[a])},k.mapply=k.post=function(a,b,c){return k(a).dispatch("post",[b,c])},o.prototype.mapply=o.prototype.post=function(a,b){return this.dispatch("post",[a,b])},k.send=k.mcall=k.invoke=function(a,b){return k(a).dispatch("post",[b,X(arguments,2)])},o.prototype.send=o.prototype.mcall=o.prototype.invoke=function(a){return this.dispatch("post",[a,X(arguments,1)])},k.fapply=function(a,b){return k(a).dispatch("apply",[void 0,b])},o.prototype.fapply=function(a){return this.dispatch("apply",[void 0,a])},k["try"]=k.fcall=function(a){return k(a).dispatch("apply",[void 0,X(arguments,1)])},o.prototype.fcall=function(){return this.dispatch("apply",[void 0,X(arguments)])},k.fbind=function(a){var b=k(a),c=X(arguments,1);return function(){return b.dispatch("apply",[this,c.concat(X(arguments))])}},o.prototype.fbind=function(){var a=this,b=X(arguments);return function(){return a.dispatch("apply",[this,b.concat(X(arguments))])}},k.keys=function(a){return k(a).dispatch("keys",[])},o.prototype.keys=function(){return this.dispatch("keys",[])},k.all=J,o.prototype.all=function(){return J(this)},k.any=K,o.prototype.any=function(){return K(this)},k.allResolved=j(L,"allResolved","allSettled"),o.prototype.allResolved=function(){return L(this)},k.allSettled=M,o.prototype.allSettled=function(){return this.then(function(a){return J($(a,function(a){function b(){return a.inspect()}return a=k(a),a.then(b,b)}))})},k.fail=k["catch"]=function(a,b){return k(a).then(void 0,b)},o.prototype.fail=o.prototype["catch"]=function(a){return this.then(void 0,a)},k.progress=N,o.prototype.progress=function(a){return this.then(void 0,void 0,a)},k.fin=k["finally"]=function(a,b){return k(a)["finally"](b)},o.prototype.fin=o.prototype["finally"]=function(a){if(!a||"function"!=typeof a.apply)throw new Error("Q can't apply finally callback");return a=k(a),this.then(function(b){return a.fcall().then(function(){return b})},function(b){return a.fcall().then(function(){throw b})})},k.done=function(a,b,c,d){return k(a).done(b,c,d)},o.prototype.done=function(a,b,c){var e=function(a){k.nextTick(function(){if(d(a,f),!k.onerror)throw a;k.onerror(a)})},f=a||b||c?this.then(a,b,c):this;"object"==typeof process&&process&&process.domain&&(e=process.domain.bind(e)),f.then(void 0,e)},k.timeout=function(a,b,c){return k(a).timeout(b,c)},o.prototype.timeout=function(a,b){var c=l(),d=setTimeout(function(){b&&"string"!=typeof b||(b=new Error(b||"Timed out after "+a+" ms"),b.code="ETIMEDOUT"),c.reject(b)},a);return this.then(function(a){clearTimeout(d),c.resolve(a)},function(a){clearTimeout(d),c.reject(a)},c.notify),c.promise},k.delay=function(a,b){return void 0===b&&(b=a,a=void 0),k(a).delay(b)},o.prototype.delay=function(a){return this.then(function(b){var c=l();return setTimeout(function(){c.resolve(b)},a),c.promise})},k.nfapply=function(a,b){return k(a).nfapply(b)},o.prototype.nfapply=function(a){var b=l(),c=X(a);return c.push(b.makeNodeResolver()),this.fapply(c).fail(b.reject),b.promise},k.nfcall=function(a){var b=X(arguments,1);return k(a).nfapply(b)},o.prototype.nfcall=function(){var a=X(arguments),b=l();return a.push(b.makeNodeResolver()),this.fapply(a).fail(b.reject),b.promise},k.nfbind=k.denodeify=function(a){if(void 0===a)throw new Error("Q can't wrap an undefined function");var b=X(arguments,1);return function(){var c=b.concat(X(arguments)),d=l();return c.push(d.makeNodeResolver()),k(a).fapply(c).fail(d.reject),d.promise}},o.prototype.nfbind=o.prototype.denodeify=function(){var a=X(arguments);return a.unshift(this),k.denodeify.apply(void 0,a)},k.nbind=function(a,b){var c=X(arguments,2);return function(){function d(){return a.apply(b,arguments)}var e=c.concat(X(arguments)),f=l();return e.push(f.makeNodeResolver()),k(d).fapply(e).fail(f.reject),f.promise}},o.prototype.nbind=function(){var a=X(arguments,0);return a.unshift(this),k.nbind.apply(void 0,a)},k.nmapply=k.npost=function(a,b,c){return k(a).npost(b,c)},o.prototype.nmapply=o.prototype.npost=function(a,b){var c=X(b||[]),d=l();return c.push(d.makeNodeResolver()),this.dispatch("post",[a,c]).fail(d.reject),d.promise},k.nsend=k.nmcall=k.ninvoke=function(a,b){var c=X(arguments,2),d=l();return c.push(d.makeNodeResolver()),k(a).dispatch("post",[b,c]).fail(d.reject),d.promise},o.prototype.nsend=o.prototype.nmcall=o.prototype.ninvoke=function(a){var b=X(arguments,1),c=l();return b.push(c.makeNodeResolver()),this.dispatch("post",[a,b]).fail(c.reject),c.promise},k.nodeify=O,o.prototype.nodeify=function(a){return a?void this.then(function(b){k.nextTick(function(){a(null,b)})},function(b){k.nextTick(function(){a(b)})}):this},k.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ia=i();return k});
//# sourceMappingURL=ectxml_2.0.0.js.map